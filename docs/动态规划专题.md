# 动态规划（经典中的经典）

动态规划可以解决问题的条件：
+ 该问题可以拆分为子问题

**动规五部曲**分别为：

1. 确定dp数组（dp table）以及下标的含义，通常dp数组里的数为当前情况下的最优值
2. 确定递推公式
3. dp数组如何初始化
4. 确定遍历顺序
5. 举例推导dp数组

+ 常见题目：
    + 背包问题

		+ 01背包：
		1. 二维数组。dp[i][j]表示（0-i）个物品放在重量为j的背包中的最大价值。遍历物品。迭代公式：1. =dp[i-1][j]不放物品i（因为放了物品i超重了）2.=dp[i-1][j-weight[i]]+ value[i]。
		2. 优化变成一维数组，注意j循环是从大递减到nums[i]。记录一下迭代循环：
		```c++
		for(int i = 0; i < weight.size(); i++) { // 遍历物品
			for(int j = bagWeight; j >= weight[i]; j--) { // 遍历背包容量
				dp[j] = max(dp[j], dp[j - weight[i]] + value[i]);
			}
		}
		```
		3. 相关练习:
			+ [分割等和子数组](https://leetcode.cn/problems/partition-equal-subset-sum/submissions/)
		+ 完全背包：每个物品有无限个。可以无限放。
		将上述代码中的循环改为：
		```c++
		// 先遍历物品，再遍历背包
		for(int i = 0; i < weight.size(); i++) { // 遍历物品
			for(int j = weight[i]; j <= bagWeight ; j++) { // 遍历背包容量
				dp[j] = max(dp[j], dp[j - weight[i]] + value[i]);

			}
		}
		```
    + 打家劫舍
		+ 如果dp[i]需要考虑dp[i-2]和dp[i-3]谁大。为什么不考虑dpp[i-4]？因为按照规则，i-2和i-4间隔一家，所以dp[i-2]肯定比dp[i-4]大。
		+ 最后返回值也是如此考虑，最后一家被偷或者最后一家不被偷两种情况的最大值。
		+ 绕圈：考虑三种情况取最大值即可。
		+ 二叉树：考虑一个长度为2（make_pair）的数组。记录偷或者不偷的最大金额。终止条件： cur == nullptr return {0, 0};
    + 股票问题
    + 子序列问题
    + 回文

+ 剑指offer分类：

	+ 面试题10：斐波那契数列
	+ 面试题14：剪绳子
	+ 面试题42：连续子数组的最大和
	+ 面试题46：把数字翻译成字符串
	+ 面试题47：礼物的最大价值
	+ 面试题48：最长不含重复字符的子字符串

# 背包问题模板

## 01背包问题

最基本的背包问题就是 01 背包问题：一共有 N 件物品，第 i（i 从 1 开始）件物品的重量为 w[i]，价值为 v[i]。在总重量不超过背包承载上限 W 的情况下，能够装入背包的最大价值是多少？

外循环：遍历arr
内循环：遍历target，倒序遍历
初始化DP大小：target.size() + 1


## 完全背包问题

有N件物品和一个最多能背重量为W的背包。第i件物品的重量是weight[i]，得到的价值是value[i] 。每件物品都有无限个（也就是可以放入背包多次），求解将哪些物品装入背包里物品价值总和最大。

完全背包和01背包问题唯一不同的地方就是，每种物品有无限件。

+ 1）如果是完全背包，即数组中的元素可重复使用并且不考虑元素之间顺序，arrs 放在外循环（保证 arrs 按顺序），target在内循环。且内循环正序。

+ 2）如果组合问题需考虑元素之间的顺序，需将 target 放在外循环，将 arrs 放在内循环，且内循环正序。

## 状态转移

然后是问题分类的模板： 
+ 1、最值问题: `dp[i] = max/min(dp[i], dp[i-nums]+1)`或`dp[i] = max/min(dp[i], dp[i-num]+nums)`; 
+ 2、存在问题(bool)：`dp[i]=dp[i]||dp[i-num]`; 
+ 3、组合问题：`dp[i]+=dp[i-num]`;

参考carl整理的：[dp总结](https://www.programmercarl.com/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E6%80%BB%E7%BB%93%E7%AF%87.html#%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98%E7%B3%BB%E5%88%97)

